{"version":3,"sources":["css/Auth.module.css","css/Content.module.css","css/ContentForm.module.css","css/Profile.module.css","css/Navigation.module.css","myFirebase.js","components/AuthForm.js","pages/Auth.js","components/Content.js","components/ContentForm.js","pages/Home.js","components/Navigation.js","pages/Profile.js","components/Router.js","components/App.js","index.js"],"names":["module","exports","myFirebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseAuth","getAuth","fireDatabase","getFirestore","fireStorage","getStorage","AuthForm","useState","email","password","form","setForm","createAccount","setCreateAccount","error","setError","formChange","target","name","value","formSubmit","e","a","preventDefault","createUserWithEmailAndPassword","account","signInWithEmailAndPassword","console","log","message","className","style","auth_form","onSubmit","type","placeholder","required","onChange","toggle_button","onClick","current","Auth","googleLogin","provider","GoogleAuthProvider","signInWithPopup","social_login","Content","content","isWriter","updateMode","setUpdateMode","text","editText","setEditText","contentFromDatabase","doc","id","deleteButtonHandler","window","confirm","deleteDoc","imageFileURL","deleteObject","ref","toggleUpdate","updateDoc","update_form","title","image","src","alt","writer","content_button","ContentForm","userObject","setText","imageFile","setImageFile","InputFile","useRef","imageFileRef","uid","uuidv4","uploadString","getDownloadURL","then","contentObject","createdAt","Date","now","writerUID","displayName","addDoc","collection","content_form","input_wrapper","maxLength","submit_button","htmlFor","accept","file","files","fileReader","FileReader","readAsDataURL","onloadend","result","currentTarget","image_upload","Home","contents","setContents","useEffect","documents","query","orderBy","onSnapshot","snapshot","documentArray","docs","map","document","data","Navigation","nav_list","to","Profile","currentUserName","userName","setUserName","navigate","useNavigate","updateProfile","currentUser","name_input","edit_button","logout_button","signOut","AppRouter","login","basename","exact","path","element","App","firebaseListen","setFirebaseListen","setUserObject","onAuthStateChanged","user","argument","Boolean","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d2eb0d1d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth_form\":\"Auth_auth_form__M_AZV\",\"toggle_button\":\"Auth_toggle_button__1GxTM\",\"social_login\":\"Auth_social_login__2wJ6n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"update_form\":\"Content_update_form__DumgT\",\"title\":\"Content_title__1Sg1q\",\"image\":\"Content_image__3Cw8h\",\"content_button\":\"Content_content_button__1c9GY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content_form\":\"ContentForm_content_form__1cZqt\",\"input_wrapper\":\"ContentForm_input_wrapper__1zDnJ\",\"image_upload\":\"ContentForm_image_upload__1lCcS\",\"submit_button\":\"ContentForm_submit_button__2H3W6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"name_input\":\"Profile_name_input__3Adx0\",\"edit_button\":\"Profile_edit_button__22_jO\",\"logout_button\":\"Profile_logout_button__cOU2X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav_list\":\"Navigation_nav_list__1Zdwd\"};","import { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID\r\n};\r\n\r\nconst myFirebase = initializeApp(firebaseConfig);\r\nexport const firebaseAuth = getAuth(myFirebase);\r\nexport const fireDatabase = getFirestore();\r\nexport const fireStorage = getStorage();","import React, { useState } from 'react';\r\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';\r\nimport { firebaseAuth } from 'myFirebase';\r\nimport style from 'css/Auth.module.css';\r\n\r\nfunction AuthForm() {\r\n  const [form, setForm] = useState({email : \"\", password: \"\"});\r\n  const [createAccount, setCreateAccount] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // const formChange = (e) => {\r\n  //   const {target : {name, value}} = e;\r\n  //   if(name === \"email\") {\r\n  //     setEmail(value);\r\n  //   } else if(name === \"password\") {\r\n  //     setPassword(value);\r\n  //   }\r\n  // }\r\n  // ìœ„ ì½”ë“œë¥¼ ë°‘ì— ì½”ë“œì²˜ëŸ¼ ê°„ë‹¨í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥\r\n\r\n  const formChange = ({target : {name, value}}) => {\r\n    setForm({...form, [name]:value});\r\n  };\r\n\r\n  const formSubmit = async(e) => {\r\n    e.preventDefault();\r\n    try {\r\n      let account;\r\n      if(createAccount) {\r\n        // create account\r\n        account = await createUserWithEmailAndPassword(firebaseAuth, form.email, form.password);\r\n      } else {\r\n        // login\r\n        account = await signInWithEmailAndPassword(firebaseAuth, form.email, form.password);\r\n      }\r\n      console.log(account);\r\n    } catch(error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  // create Account true or false => ë²„íŠ¼ ë‚´ìš© ë³€ê²½\r\n  const toggleAccountButton = () => {\r\n    setCreateAccount((current) => !current);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form className={style.auth_form} onSubmit={formSubmit}>\r\n        <input type=\"email\" name=\"email\" value={form.email} placeholder=\"ì´ë©”ì¼\" required onChange={formChange} />\r\n        <input type=\"password\" name=\"password\" value={form.password} placeholder=\"ë¹„ë°€ë²ˆí˜¸\" required onChange={formChange} />\r\n        <button type=\"submit\">{createAccount ? \"íšŒì›ê°€ì…\" : \"ë¡œê·¸ì¸\"}</button>\r\n        {error && <p>Error : {error}</p>}\r\n      </form>\r\n      <button className={style.toggle_button} onClick={toggleAccountButton}>{createAccount ? \"ë¡œê·¸ì¸í•˜ê¸°\" : \"íšŒì›ê°€ì…í•˜ê¸°\"}</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AuthForm;\r\n","import { firebaseAuth } from 'myFirebase';\r\nimport React from 'react';\r\nimport { GoogleAuthProvider, signInWithPopup } from 'firebase/auth';\r\nimport AuthForm from 'components/AuthForm';\r\nimport style from 'css/Auth.module.css';\r\n\r\nfunction Auth() {\r\n  // google login onClick event\r\n  const googleLogin = async() => {\r\n    const provider = new GoogleAuthProvider();\r\n    await signInWithPopup(firebaseAuth, provider);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* AuthForm component */}\r\n      <AuthForm />\r\n      <div>\r\n        <button className={style.social_login} onClick={googleLogin}>Googleë¡œ ì‹œì‘í•˜ê¸°</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Auth;\r\n","import { fireDatabase, fireStorage } from 'myFirebase';\r\nimport React, { useState } from 'react';\r\nimport { doc, deleteDoc, updateDoc } from \"firebase/firestore\";\r\nimport { deleteObject, ref } from \"firebase/storage\";\r\nimport style from 'css/Content.module.css';\r\n\r\nfunction Content({content, isWriter}) {\r\n  const [updateMode, setUpdateMode] = useState(false);\r\n  const [editText, setEditText] = useState(content.text);\r\n\r\n  const contentFromDatabase = doc(fireDatabase, \"contents\", `${content.id}`);\r\n\r\n  const deleteButtonHandler = async() => {\r\n    const confirm = window.confirm(\"ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\");\r\n    if(confirm) {\r\n      await deleteDoc(contentFromDatabase);\r\n      if(content.imageFileURL !== \"\") {\r\n        await deleteObject(ref(fireStorage, content.imageFileURL));\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleUpdate = () => {\r\n    setUpdateMode((current) => !current);\r\n  };\r\n\r\n  const editTextChange = ({target : {value}}) => {\r\n    setEditText(value);\r\n  };\r\n\r\n  const formSubmit = async(e) => {\r\n    e.preventDefault();\r\n    await updateDoc(contentFromDatabase, {text: editText});\r\n    setUpdateMode(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {updateMode ?\r\n        <> \r\n          {isWriter && \r\n            <div className={style.update_form}>\r\n              <form onSubmit={formSubmit}>\r\n                <input type=\"text\" value={editText} onChange={editTextChange} required/>\r\n                <button type=\"submit\">ìˆ˜ì •í•˜ê¸°</button>\r\n              </form>\r\n              <button onClick={toggleUpdate}>ì·¨ì†Œ</button>\r\n            </div>\r\n          }\r\n        </>\r\n        :\r\n        <>\r\n          <h4 className={style.title}>{content.text}</h4>\r\n          {content.imageFileURL && \r\n            <img className={style.image} src={content.imageFileURL} alt=\"ì—…ë¡œë“œ ì´ë¯¸ì§€\" />\r\n          }\r\n          <h5>ê¸€ì“´ì´ : {content.writer}</h5>\r\n          {/* ì‘ì„±ìì™€ ë¡œê·¸ì¸ ì¤‘ì¸ ì‚¬ìš©ìê°€ ê°™ì„ ë•Œ */}\r\n          {isWriter && \r\n            <div className={style.content_button}>\r\n              <button type=\"button\" onClick={toggleUpdate}>ìˆ˜ì •</button>\r\n              <button type=\"button\" onClick={deleteButtonHandler}>ì‚­ì œ</button>\r\n            </div>\r\n          }\r\n        </>\r\n        }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Content;\r\n","import React, { useRef, useState } from 'react';\r\nimport { ref, uploadString, getDownloadURL } from \"firebase/storage\";\r\nimport { fireDatabase, fireStorage } from 'myFirebase';\r\nimport { addDoc, collection } from 'firebase/firestore';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport style from 'css/ContentForm.module.css';\r\n\r\nfunction ContentForm({userObject}) {\r\n  const [text, setText] = useState(\"\");\r\n  const [imageFile, setImageFile] = useState(\"\");\r\n  const InputFile = useRef();\r\n\r\n  const textChange = ({target : {value}}) => {\r\n    // setText(e.target.value);\r\n    setText(value);\r\n  };\r\n\r\n  const formSubmit = async(e) => {\r\n    e.preventDefault();\r\n    let imageFileURL = \"\";\r\n    // ì—…ë¡œë“œ í•˜ê³ ì í•˜ëŠ” image fileì´ ìˆëŠ” ê²½ìš°\r\n    if(imageFile !== \"\") {\r\n        // storageì— image file ì €ì¥ (ê²½ë¡œ)\r\n      const imageFileRef = ref(fireStorage, `${userObject.uid}/${uuidv4()}`);\r\n      await uploadString(imageFileRef, imageFile, \"data_url\");\r\n      // imageì˜ urlì„ ë°›ì•„ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê¸° ìœ„í•¨\r\n      imageFileURL = await getDownloadURL(imageFileRef).then();\r\n    }\r\n\r\n    const contentObject = {\r\n      text, createdAt: Date.now(), \r\n      writerUID: userObject.uid,\r\n      imageFileURL,\r\n      writer: userObject.displayName\r\n    };\r\n\r\n    await addDoc(collection(fireDatabase, \"contents\"), contentObject);\r\n    setText(\"\");\r\n    setImageFile(\"\");\r\n  };\r\n\r\n  const imageFileChange = ({target: {files}}) => {\r\n    const file = files[0];\r\n    // FileReader Web Api ë¥¼ ì´ìš©í•´ íŒŒì¼ì„ ì½ìŒ\r\n    const fileReader = new FileReader();\r\n    fileReader.readAsDataURL(file);\r\n    fileReader.onloadend = ({currentTarget: {result}}) => {\r\n      setImageFile(result);\r\n    };\r\n  };\r\n\r\n  const clearImageFile = () => {\r\n    setImageFile(\"\");\r\n    InputFile.current.value = \"\";\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form className={style.content_form} onSubmit={formSubmit}>\r\n        <div className={style.input_wrapper}>\r\n          <div>\r\n            <input type=\"text\" value={text} onChange={textChange} placeholder=\"ì‘ì„±í•˜ê³  ì‹¶ì€ ë‚´ìš©ì„ ì ì–´ì£¼ì„¸ìš”ğŸ“¢\" maxLength={150} />\r\n            <button className={style.submit_button} type=\"submit\">ê¸€ ì˜¬ë¦¬ê¸°</button>\r\n          </div>\r\n          <label htmlFor=\"input_file\">ğŸ“¸ì´ë¯¸ì§€ ì—…ë¡œë“œ</label>\r\n          <input type=\"file\" ref={InputFile} id=\"input_file\" accept=\"image/*\" onChange={imageFileChange}/>\r\n        </div>\r\n        {imageFile && \r\n          <div className={style.image_upload}>\r\n            <img src={imageFile} alt=\"ì—…ë¡œë“œí•œ ì´ë¯¸ì§€\"/>\r\n            <button onClick={clearImageFile}>ì´ë¯¸ì§€ ì§€ìš°ê¸°</button>\r\n          </div>\r\n        }\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ContentForm;\r\n","import { fireDatabase } from 'myFirebase';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { collection, query, orderBy, onSnapshot } from 'firebase/firestore';\r\nimport Content from 'components/Content';\r\nimport ContentForm from 'components/ContentForm';\r\n\r\nfunction Home({userObject}) {\r\n  const [contents, setContents] = useState([]);\r\n  \r\n  // databaseì— ìˆëŠ” ë°ì´í„° ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ í›„ stateì— ì €ì¥\r\n  useEffect(() => {\r\n    const documents = query(collection(fireDatabase, \"contents\"), orderBy(\"createdAt\", \"desc\"));\r\n    // onSnapshotì€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë³€í™”ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì•Œë ¤ì¤Œ\r\n    onSnapshot(documents, (snapshot) => {\r\n      const documentArray = snapshot.docs.map((document) => ({\r\n        id: document.id,\r\n        ...document.data()\r\n      }));\r\n      setContents(documentArray);\r\n    });\r\n    return () => setContents([]);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <ContentForm userObject={userObject}/>\r\n      <div>\r\n        {contents.map((content) => (\r\n          // isWriter : ì‘ì„±ìì™€ ë¡œê·¸ì¸ ì¤‘ì¸ ì‚¬ìš©ìê°€ ê°™ì€ì§€ true or false ì „ë‹¬\r\n          <Content key={content.id} content={content} isWriter={content.writerUID === userObject.uid} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport style from 'css/Navigation.module.css';\r\n\r\nfunction Navigation({userObject}) {\r\n  return (\r\n    <nav>\r\n      <ul className={style.nav_list}>\r\n        <li>\r\n          <Link to=\"/\" >ğŸ¡í™ˆìœ¼ë¡œ</Link>\r\n        </li>\r\n        <li>\r\n          <Link to=\"/profile\">ğŸ’š{userObject.displayName}ì˜ í”„ë¡œí•„</Link>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default Navigation;\r\n","import { firebaseAuth } from 'myFirebase';\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { updateProfile } from 'firebase/auth';\r\nimport style from 'css/Profile.module.css';\r\n\r\nfunction Profile({userObject, currentUserName}) {\r\n  const [userName, setUserName] = useState(userObject.displayName);\r\n  const navigate = useNavigate();\r\n  const handleLogoutButton = () => {\r\n    firebaseAuth.signOut();\r\n    navigate('/');\r\n  };\r\n\r\n  const userNameChange = ({target: {value}}) => {\r\n    setUserName(value);\r\n  };\r\n\r\n  const formSubmit = async(e) => {\r\n    e.preventDefault();\r\n    // firebase Authì˜ displayNameì„ ë³€ê²½ì‹œì¼œì¤Œ\r\n    if(userObject.displayName !== userName) {\r\n      await updateProfile(firebaseAuth.currentUser, {\r\n        displayName: userName\r\n      });\r\n      // projectì•ˆì—ì„œì˜ displayName ì—­ì‹œ ë³€ê²½ì‹œì¼œì¤Œ\r\n      currentUserName();\r\n    }\r\n    navigate('/');\r\n  };\r\n  \r\n  return (\r\n    <div>\r\n      <h4>{userObject.displayName}ì˜ Profile</h4>\r\n      <form onSubmit={formSubmit}>\r\n        <input className={style.name_input} type=\"text\" placeholder=\"ì´ë¦„\" value={userName} onChange={userNameChange}/>\r\n        <button className={style.edit_button} type=\"submit\">ìˆ˜ì •í•˜ê¸°</button>\r\n      </form>\r\n      <button className={style.logout_button} onClick={handleLogoutButton}>ë¡œê·¸ì•„ì›ƒ</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport Auth from 'pages/Auth';\r\nimport Home from 'pages/Home';\r\nimport Navigation from 'components/Navigation';\r\nimport Profile from 'pages/Profile';\r\n\r\nconst AppRouter = ({login, userObject, currentUserName}) => {\r\n  return (\r\n    <Router basename={process.env.PUBLIC_URL}>\r\n      {login && <Navigation userObject={userObject}/>}\r\n      <Routes>\r\n        {\r\n          login ?\r\n          <>\r\n            <Route exact path=\"/\" element={<Home userObject={userObject}/>} />\r\n            <Route exact path=\"/profile\" element={<Profile userObject={userObject} currentUserName={currentUserName}/>} />\r\n          </> \r\n          : <Route exact path=\"/\" element={<Auth/>} />\r\n        }\r\n      </Routes>\r\n    </Router>\r\n  )\r\n};\r\n\r\nexport default AppRouter;","import React, { useEffect, useState } from 'react';\nimport AppRouter from 'components/Router';\nimport { firebaseAuth } from 'myFirebase';\nimport 'css/App.css';\n\nfunction App() {\n  // firebase dataë¥¼ ì½ì–´ë“¤ì˜€ëŠ”ì§€ ì—¬ë¶€ì— ëŒ€í•œ state\n  const [firebaseListen, setFirebaseListen] = useState(false);\n  const [userObject, setUserObject]= useState(null);\n\n  useEffect(() => {\n    // Authì— ëŒ€í•œ ë³€í™”ë¥¼ ê°ì§€í•¨\n    firebaseAuth.onAuthStateChanged((user) => {\n      if(user) {\n        // userì˜ displayName, uid, updateProfileë§Œ userObjectì— ë„£ì–´ì¤Œ\n        setUserObject({\n          displayName: user.displayName ? user.displayName : \"ì‚¬ìš©ì\",\n          uid: user.uid,\n          updateProfile: (argument) => user.updateProfile(argument)\n        });\n      } else {\n        setUserObject(null);\n      }\n      setFirebaseListen(true);\n    });\n  }, []);\n\n  // project ë‚´ì˜ displayNameì„ ë³€ê²½ì‹œì¼œì¤Œ\n  const currentUserName = () => {\n    const user = firebaseAuth.currentUser;\n    setUserObject({\n      displayName: user.displayName,\n      uid: user.uid,\n      updateProfile: (argument) => user.updateProfile(argument)\n    });\n  };\n\n  return (\n    <div className=\"app\">\n      <h3 className=\"title\">ğŸŒ³ Book-ggum-na-mu ğŸŒ³</h3>\n      {firebaseListen ? <AppRouter login={Boolean(userObject)} userObject={userObject} currentUserName={currentUserName}/> : \"ë¡œê·¸ì¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...\"}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}